<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Student Dashboard</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    color: #333;
  }
  .dark-mode {
    background: #181a1b;
    color: #f5f5f5;
  }

  /* Dark mode overrides */
  .dark-mode .sidebar {
    background: #222831;
    color: #eeeeee;
  }
  .dark-mode .sidebar .nav li a {
    color: #eeeeee;
  }
  .dark-mode .sidebar .nav li a:hover {
    background: #393e46;
  }
  .dark-mode .header {
    background: #282c34;
    color: #ddd;
    box-shadow: none;
  }
  .dark-mode .search-bar input {
    background: #3a3f47;
    border: 1px solid #555;
    color: #eee;
  }
  .dark-mode .search-bar button {
    background: #222831;
    color: #eee;
  }
  .dark-mode .search-bar button:hover {
    background: #393e46;
  }
  .dark-mode .table-container {
    background: #222831;
    border-color: #444;
    box-shadow: none;
  }
  .dark-mode table {
    background: #222831;
    color: #eee;
  }
  .dark-mode th {
    background: #393e46;
    color: #eee;
  }
  .dark-mode tr:nth-child(even) {
    background: #2c2f33;
  }

  .container {
    display: flex;
    height: 100vh;
  }
  .sidebar {
    width: 240px;
    background: #2c3e50;
    color: #ecf0f1;
    padding: 20px;
    box-sizing: border-box;
  }
  .sidebar h2 {
    font-size: 20px;
    margin-bottom: 30px;
    text-align: center;
  }
  .sidebar .nav {
    list-style: none;
    padding: 0;
  }
  .sidebar .nav li {
    margin: 15px 0;
  }
  .sidebar .nav li a {
    color: #ecf0f1;
    text-decoration: none;
    display: block;
    padding: 8px;
    border-radius: 4px;
    transition: background 0.3s;
    cursor: pointer;
  }
  .sidebar .nav li a:hover {
    background: #34495e;
  }
  .main {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    overflow: hidden;
  }
  /* Fixed header */
  .header {
    flex: 0 0 auto;
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    background: #fff;
    padding: 10px 15px;
    box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
    z-index: 10;
    position: sticky;
    top: 0;
  }
  .search-bar {
    display: flex;
    gap: 8px;
  }
  .search-bar input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 250px;
  }
  .search-bar button {
    padding: 8px 12px;
    border: none;
    background: #2c3e50;
    color: #fff;
    border-radius: 4px;
    cursor: pointer;
  }
  .search-bar button:hover {
    background: #34495e;
  }
  /* Scrollable table container */
  .table-container {
    flex: 1 1 auto;
    overflow: auto;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
  }
  h2 {
    margin: 0 0 10px 0;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    min-width: 1600px;
    table-layout: fixed;  /* enforce column widths */
  }
  th, td {
    border: 1px solid #ccc;
    padding: 6px 10px;
    font-size: 14px;
    text-align: left;

    /* prevent breaking content */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  th {
    background: #2c3e50;
    color: white;
    position: sticky;
    top: 0;
    z-index: 5;
  }
  tr:nth-child(even) {
    background: #f9f9f9;
  }

  /* Column widths by individual col */
  colgroup col:nth-child(1) { width: 200px; }   /* Name */
  colgroup col:nth-child(2) { width: 200px; }   /* Roll no */
  colgroup col:nth-child(3) { width: 100px; }   /* Branch */
  colgroup col:nth-child(4) { width: 160px; }   /* Student Mobile no */
  colgroup col:nth-child(5) { width: 180px; }   /* Student Aadhar number */
  colgroup col:nth-child(6) { width: 160px; }
  colgroup col:nth-child(7) { width: 160px; }
  colgroup col:nth-child(8) { width: 140px; }
  colgroup col:nth-child(9) { width: 150px; }
  colgroup col:nth-child(10){ width: 140px; }
  colgroup col:nth-child(11){ width: 150px; }
  colgroup col:nth-child(12){ width: 140px; }
  colgroup col:nth-child(13){ width: 150px; }
  colgroup col:nth-child(14){ width: 180px; }
  colgroup col:nth-child(15){ width: 140px; }
  colgroup col:nth-child(16){ width: 120px; }
  colgroup col:nth-child(17){ width: 100px; }
  colgroup col:nth-child(18){ width: 120px; }
  colgroup col:nth-child(19){ width: 150px; }
  colgroup col:nth-child(20){ width: 150px; }
  colgroup col:nth-child(21){ width: 100px; }
  colgroup col:nth-child(22){ width: 150px; }
  colgroup col:nth-child(23){ width: 180px; }
  colgroup col:nth-child(24){ width: 180px; }
  colgroup col:nth-child(25){ width: 150px; }
  colgroup col:nth-child(26){ width: 150px; }
  colgroup col:nth-child(27){ width: 100px; }
  colgroup col:nth-child(28){ width: 120px; }
  colgroup col:nth-child(29){ width: 200px; }
  colgroup col:nth-child(30){ width: 180px; }
  colgroup col:nth-child(31){ width: 150px; }
  colgroup col:nth-child(32){ width: 150px; }
  colgroup col:nth-child(33){ width: 120px; }
  colgroup col:nth-child(34){ width: 100px; }
  colgroup col:nth-child(35){ width: 100px; }
  colgroup col:nth-child(36){ width: 150px; }
  colgroup col:nth-child(37){ width: 100px; }
  colgroup col:nth-child(38){ width: 180px; }
  colgroup col:nth-child(39){ width: 180px; }
  colgroup col:nth-child(40){ width: 150px; }
  colgroup col:nth-child(41){ width: 150px; }
  colgroup col:nth-child(42){ width: 150px; }
  colgroup col:nth-child(43){ width: 150px; }
</style>
</head>
<body>
<div class="container">
<aside class="sidebar">
  <h2>STUDENT<br>MANAGEMENT<br>SYSTEM</h2>
  <ul class="nav">
    <li><a href="{{ url_for('dashboard') }}">ðŸ“Š Dashboard</a></li>
    <li><a href="{{ url_for('add_student') }}">âž• Add Student</a></li>
    <li><a href="javascript:void(0);" onclick="toggleDarkMode()">ðŸŒ“ Dark Mode</a></li>
    <li><a href="{{ url_for('logout') }}">ðŸšª Logout</a></li>
  </ul>
</aside>


  <main class="main">
    <div class="header">
      <div><strong>Total Students:</strong> {{ total_students }}</div>
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search by student name or roll no...." />
        <button onclick="toggleDarkMode()">ðŸŒ“</button>
      </div>
    </div>

    <h2>Student Information</h2>
    <div class="table-container">
      <table id="studentTable">
        <colgroup>
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
          <col />
        </colgroup>
        <thead>
          <tr>
            <th>Name</th>
            <th>Roll no</th>
            <th>Branch</th>
            <th>Student Mobile no</th>
            <th>Student Aadhar number</th>
            <th>Father name</th>
            <th>Father aadhar number</th>
            <th>Father qualification</th>
            <th>Father occupation</th>
            <th>Father phone no</th>
            <th>Mother name</th>
            <th>Mother qualification</th>
            <th>Mother occupation</th>
            <th>Mother aadhar no</th>
            <th>Mother phone no</th>
            <th>Have u Laptop</th>
            <th>Cast</th>
            <th>Sub cast</th>
            <th>Qualification</th>
            <th>CET hall ticket no</th>
            <th>CET rank</th>
            <th>JVD ID</th>
            <th>Inter hall ticket no</th>
            <th>Inter clg name</th>
            <th>Inter clg location</th>
            <th>Inter clg district</th>
            <th>Inter percentage</th>
            <th>Inter pass year</th>
            <th>SSC hall ticket no</th>
            <th>School name</th>
            <th>School location</th>
            <th>School district</th>
            <th>10th board type</th>
            <th>SSC persentage</th>
            <th>SSC pass year</th>
            <th>Religion</th>
            <th>Door no</th>
            <th>Street</th>
            <th>Area/landmark</th>
            <th>Village name</th>
            <th>District name</th>
            <th>Old district name</th>
            <th>State name</th>
            <th>Pin code</th>
          </tr>
        </thead>
        <tbody>
          {% for student in students %}
          <tr>
            <td>{{ student.name }}</td>
            <td>{{ student.rollno }}</td>
            <td>{{ student.branch }}</td>
            <td>{{ student.mobile }}</td>
            <td>{{ student.aadhar }}</td>
            <td>{{ student.father_name }}</td>
            <td>{{ student.father_aadhar }}</td>
            <td>{{ student.father_qualification }}</td>
            <td>{{ student.father_occupation }}</td>
            <td>{{ student.father_phone }}</td>
            <td>{{ student.mother_name }}</td>
            <td>{{ student.mother_qualification }}</td>
            <td>{{ student.mother_occupation }}</td>
            <td>{{ student.mother_aadhar }}</td>
            <td>{{ student.mother_phone }}</td>
            <td>{{ student.laptop }}</td>
            <td>{{ student.cast }}</td>
            <td>{{ student.sub_cast }}</td>
            <td>{{ student.qualification }}</td>
            <td>{{ student.cet_no }}</td>
            <td>{{ student.cet_rank }}</td>
            <td>{{ student.jvd_id }}</td>
            <td>{{ student.inter_htno }}</td>
            <td>{{ student.inter_college }}</td>
            <td>{{ student.inter_location }}</td>
            <td>{{ student.inter_district }}</td>
            <td>{{ student.inter_percent }}</td>
            <td>{{ student.inter_year }}</td>
            <td>{{ student.ssc_htno }}</td>
            <td>{{ student.school }}</td>
            <td>{{ student.school_location }}</td>
            <td>{{ student.school_district }}</td>
            <td>{{ student.board }}</td>
            <td>{{ student.ssc_percent }}</td>
            <td>{{ student.ssc_year }}</td>
            <td>{{ student.religion }}</td>
            <td>{{ student.door_no }}</td>
            <td>{{ student.street }}</td>
            <td>{{ student.landmark }}</td>
            <td>{{ student.village }}</td>
            <td>{{ student.district }}</td>
            <td>{{ student.old_district }}</td>
            <td>{{ student.state }}</td>
            <td>{{ student.pincode }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </main>
</div>

<script>
  document.getElementById("searchInput").addEventListener("keyup", function () {
    let filter = this.value.toLowerCase();
    let rows = document.querySelectorAll("#studentTable tbody tr");
    rows.forEach(row => {
      let text = row.innerText.toLowerCase();
      row.style.display = text.includes(filter) ? "" : "none";
    });
  });
   // Move to next input on Enter key
  document.querySelectorAll('input, select, textarea').forEach((el, index, fields) => {
    el.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const next = fields[index + 1];
        if (next) {
          next.focus();
        }
      }
    });
  });

  function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
  }
  if (localStorage.getItem("darkMode") === "true") {
    document.body.classList.add("dark-mode");
  }

  window.onpopstate = function(event) {
    if (confirm("You are about to go back. Do you want to logout?")) {
        window.location.href = "/logout";
    } else {
        history.pushState(null, null, location.href); // Stay on page
    }
};

history.pushState(null, null, location.href);
</script>
</body>
</html>
